import 'package:flutter_test/flutter_test.dart';
import 'package:the_fridge/utils/parse_json.dart';

void main() {
  test("parses recipeIds.json", () {
    const jsonString = """["b51442bfb6edec502e1f00fbd49ed1aa", "3"]""";
    expect(
        parseRecipeIds(jsonString).first, "b51442bfb6edec502e1f00fbd49ed1aa");
  });
  test("parses recipe.json", () {
    const recipeString =
        """{"tags":["Dinner","Starter","Nut-Free","Weeknight Meals","Fry","Shrimp","Shellfish","Seafood","Coconut","Fruit","Lime","Citrus","Entertaining"],"servings":"4 servings","recipeSource":"By Asha Loupy","imageSource":"Photograph by Isa Zapata, Food Styling by Judy Kim, Prop Styling by Stephanie De Luca","image":{"120w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_120,c_limit/0405-coconut-shrimp-lede.jpg","240w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_240,c_limit/0405-coconut-shrimp-lede.jpg","320w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_320,c_limit/0405-coconut-shrimp-lede.jpg","640w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_640,c_limit/0405-coconut-shrimp-lede.jpg","960w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_960,c_limit/0405-coconut-shrimp-lede.jpg","1280w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_1280,c_limit/0405-coconut-shrimp-lede.jpg","1600w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_1600,c_limit/0405-coconut-shrimp-lede.jpg","1920w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_1920,c_limit/0405-coconut-shrimp-lede.jpg","2240w":"https://assets.bonappetit.com/photos/624c7030317ce1a4db14133b/1:1/w_2240,c_limit/0405-coconut-shrimp-lede.jpg"},"instructions":"SPICY LIME MAYO  Whisk 3/4 cup plain whole-milk Greek yogurt, 1/4 cup mayonnaise, 2 Tbsp. sambal oelek, 1/2 tsp. toasted sesame oil, 2 tsp. finely grated lime zest, 1 Tbsp. plus 1 1/2 tsp. fresh lime juice, 1/2 tsp. toasted sesame oil, 1/2 tsp. Diamond Crystal or 1/4 tsp. Morton kosher salt, and 1 garlic clove, finely grated, in a small bowl to combine. Taste and add more sambal oelek and/or season with more salt if needed. Cover spicy lime mayo and chill until ready to serve.SHRIMP AND ASSEMBLY  Arrange 1 1/2 lb. large shrimp (16-20), peeled, deveined, patted dry, on a rimmed baking sheet and season with 1 tsp. Diamond Crystal or 1/2 tsp. Morton kosher salt. Place 1/2 cup all-purpose flour in a shallow bowl. Lightly beat 2 large eggs in another shallow bowl to blend. Mix 1 cup unsweetened shredded coconut, 1/2 cup panko, 1/3 cup white and/or black sesame seeds, 1 Tbsp. granulated sugar, and remaining 1 tsp. Diamond Crystal or 1/2 tsp. Morton kosher salt in a third shallow bowl.Working with a couple shrimp at a time, dredge in flour, shaking off any excess, then dip into egg, letting excess drip back into bowl, and dredge in coconut mixture, pressing gently on both sides to adhere and evenly coat. Transfer breaded shrimp back to baking sheet as you go. Chill 10 minutes (this will help the breading stick to the shrimp).Pour vegetable oil (about 1 1/4 cups) in a large skillet to come 1/4 up sides and heat over medium-high. Working in 2 batches, cook shrimp until crisp and golden, about 2 minutes per side. Transfer to a wire rack set inside a rimmed baking sheet and let drain.To serve, divide spicy lime mayo among plates or shallow bowls, spreading it on 1 side and mound shrimp on top. Pile some cabbage wedges, sugar snap peas, cucumber spears, and/or other crunchy vegetables on other side. (Alternatively, you can serve family-style on a large platter.)","ingredients":["Spicy Lime Mayo ","3/4 cup plain whole-milk Greek yogurt ","1/4 cup mayonnaise ","2 Tbsp. (or more) sambal oelek ","2 tsp. finely grated lime zest ","1 1/2 Tbsp. fresh lime juice ","1/2 tsp. toasted sesame oil ","1/2 tsp. Diamond Crystal or 1/4 tsp. Morton kosher salt; plus more (optional) ","1 garlic clove, finely grated ","Shrimp and assembly ","1 1/2 lb. large shrimp (16-20), peeled, deveined, patted dry ","2 tsp. Diamond Crystal or 1 tsp. Morton kosher salt, divided ","1/2 cup all-purpose flour ","2 large eggs ","1 cup unsweetened shredded coconut ","1/2 cup panko ","1/3 cup white and/or black sesame seeds ","1 Tbsp. granulated sugar "," Vegetable oil (for frying; about 1 1/4 cups) "," Cabbage wedges, sugar snap peas, cucumber spears, and/or other crunchy vegetables (for serving) "],"title":"Crunchy Coconut-Sesame Shrimp With Spicy Lime Mayo","id":"b51442bfb6edec502e1f00fbd49ed1aa","parsedIngredients":[{"confidence":0.74761,"product":"Spicy Lime Mayo","productSizeModifier":null,"quantity":null,"unit":null,"preparationNotes":null,"usda_info":null},{"confidence":0.235687,"product":"plain whole-milk Greek yogurt","productSizeModifier":null,"quantity":0.75,"unit":null,"preparationNotes":null,"usda_info":null},{"confidence":0.81814,"product":"mayonnaise","productSizeModifier":null,"quantity":0.25,"unit":"cup","preparationNotes":null,"usda_info":null},{"confidence":0.314444,"product":"sambal oelek","productSizeModifier":null,"quantity":2,"unit":"tablespoon","preparationNotes":"or more","usda_info":null},{"confidence":0.716088,"product":"lime zest","productSizeModifier":null,"quantity":2,"unit":"teaspoon","preparationNotes":"finely grated","usda_info":null},{"confidence":0.9077617,"product":"fresh lime juice","productSizeModifier":null,"quantity":1.5,"unit":"tablespoon","preparationNotes":null,"usda_info":{"category":"Fruits and Fruit Juices","description":"Lime juice, raw","fdcId":"168156","matchMethod":"exact"}},{"confidence":0.225485,"product":"toasted sesame oil","productSizeModifier":null,"quantity":0.5,"unit":"teaspoon","preparationNotes":null,"usda_info":null},{"confidence":0.090668,"product":"Diamond Crystal Morton kosher salt","productSizeModifier":null,"quantity":null,"unit":null,"preparationNotes":null,"usda_info":null},{"confidence":0.9587631999999999,"product":"garlic","productSizeModifier":null,"quantity":1,"unit":"clove","preparationNotes":"finely grated","usda_info":{"category":null,"description":"Garlic, raw","fdcId":"787793","matchMethod":"exact"}},{"confidence":0.874087,"product":"Shrimp and assembly","productSizeModifier":null,"quantity":null,"unit":null,"preparationNotes":null,"usda_info":null},{"confidence":0.7176108999999999,"product":"shrimp","productSizeModifier":"large","quantity":1.5,"unit":"pound","preparationNotes":"16-20, peeled, deveined, patted dry","usda_info":{"category":"Finfish and Shellfish Products","description":"Crustaceans, shrimp, raw","fdcId":"175179","matchMethod":"exact"}},{"confidence":0.579688,"product":"Diamond Crystal Morton kosher salt","productSizeModifier":null,"quantity":2,"unit":"teaspoon","preparationNotes":"divided","usda_info":null},{"confidence":0.399091,"product":"all-purpose flour","productSizeModifier":null,"quantity":0.5,"unit":"cup","preparationNotes":null,"usda_info":null},{"confidence":0.9857686,"product":"eggs","productSizeModifier":"large","quantity":2,"unit":null,"preparationNotes":null,"usda_info":{"category":"Dairy and Egg Products","description":"Egg, whole, raw, fresh","fdcId":"171287","matchMethod":"exact"}},{"confidence":0.913059,"product":"unsweetened shredded coconut","productSizeModifier":null,"quantity":1,"unit":"cup","preparationNotes":null,"usda_info":null},{"confidence":0.665889,"product":"panko","productSizeModifier":null,"quantity":0.5,"unit":"cup","preparationNotes":null,"usda_info":null},{"confidence":0.7287667,"product":"sesame seeds","productSizeModifier":null,"quantity":null,"unit":"cup","preparationNotes":"white and/or black","usda_info":{"category":"Nut and Seed Products","description":"Seeds, sesame seeds, whole, dried","fdcId":"170150","matchMethod":"exact"}},{"confidence":0.9682423,"product":"granulated sugar","productSizeModifier":null,"quantity":1,"unit":"tablespoon","preparationNotes":null,"usda_info":{"category":"Sweets","description":"Sugars, granulated","fdcId":"169655","matchMethod":"exact"}},{"confidence":0.9100963,"product":"Vegetable oil","productSizeModifier":null,"quantity":null,"unit":null,"preparationNotes":null,"usda_info":{"category":"Fats and Oils","description":"Oil, vegetable, soybean, refined","fdcId":"172370","matchMethod":"exact"}},{"confidence":0.12087,"product":null,"productSizeModifier":null,"quantity":null,"unit":null,"preparationNotes":"Cabbage wedges, sugar snap peas","usda_info":null}]}""";

    expect(parseRecipe(recipeString).title,
        "Crunchy Coconut-Sesame Shrimp With Spicy Lime Mayo");
  });
}
